from flask import Flask, render_template, request, jsonify
import random
import os

app = Flask(__name__)

# 王者荣耀搞笑数据池
heroes = ["鲁班七号", "后羿", "李白", "貂蝉", "诸葛亮", "孙悟空", "蔡文姬", "亚瑟", "瑶", "镜"]
ranks = ["倔强青铜", "秩序白银", "荣耀黄金", "尊贵铂金", "永恒钻石", "至尊星耀", "最强王者", "无双王者", "荣耀王者", "巅峰王者"]
funny_outfit = [
    # 射手全肉流
    ["抵抗之靴", "红莲斗篷", "魔女斗篷", "反伤刺甲", "不祥征兆", "永夜守护"],
    # 法师全肉流
    ["冷静之靴", "痛苦面具", "反伤刺甲", "魔女斗篷", "永夜守护", "不祥征兆"],
    # 坦克全输出
    ["影忍之足", "末世", "无尽战刃", "破晓", "名刀·司命", "贤者的庇护"],
    # 辅助出全攻速
    ["迅捷之靴", "风暴巨剑", "电刀", "影刃", "无尽战刃", "破晓"],
    # 鲁班专属六神装（全肉）
    ["抵抗之靴", "红莲斗篷", "霸者重装", "反伤刺甲", "魔女斗篷", "永夜守护"],
    # 李白喝醉流
    ["秘法之靴", "噬神之书", "博学者之怒", "辉月", "回响之杖", "虚无法杖"],
    # 瑶妹物理输出
    ["影忍之足", "暗影战斧", "无尽战刃", "破军", "名刀·司命", "破晓"],
    # 貂蝉全防御
    ["冷静之靴", "永夜守护", "魔女斗篷", "不祥征兆", "反伤刺甲", "冰脉护手"],
    # 后羿全法强
    ["秘法之靴", "回响之杖", "博学者之怒", "虚无法杖", "噬神之书", "辉月"],
    # 狂铁六把破军（经典梗）
    ["抵抗之靴", "破军", "破军", "破军", "破军", "破军"],
    # 孙悟空纯肉打野
    ["抵抗之靴", "红莲斗篷", "反伤刺甲", "魔女斗篷", "不祥征兆", "永夜守护"],
    # 程咬金回血流（六把血手）
    ["影忍之足", "血魔之怒", "血魔之怒", "血魔之怒", "血魔之怒", "血魔之怒"],
    # 蔡文姬输出流
    ["秘法之靴", "痛苦面具", "回响之杖", "博学者之怒", "虚无法杖", "噬神之书"],
    # 随机纯肉六神装
    ["抵抗之靴", "霸者重装", "反伤刺甲", "魔女斗篷", "不祥征兆", "永夜守护"],
    # 随机纯输出六神装
    ["迅捷之靴", "无尽战刃", "宗师之力", "破军", "名刀·司命", "破晓"],
]
fortunes = [
    "今日宜上分，五杀拿捏，巅峰赛直接1800！",
    "宜送人头，队友四个演员，建议直接挂机",
    "宜脱单，今天匹配到小姐姐瑶妹保护你！",
    "警告：今晚段位要掉20星，建议卸载游戏",
    "宜冲巅峰赛，直接国服前100！",
    "今日霉运缠身，匹配到四个鲁班队友",
    "宜开黑，宜抱大腿，宜躺赢",
    "恭喜你，今天随机到隐藏皮肤：黄金白羊座！",
    "建议今天别玩了，去谈恋爱吧～",
    "今晚必拿五杀，MVP稳了！",
]

@app.route('/')
def index():
    return render_template('index.html')

@app.route('/query', methods=['POST'])
def query():
    name = request.form['name']
    area = request.form['area']
    
    hidden_score = random.randint(4800, 9999)
    predict_rank = random.choice(["今晚必上王者", "峰赛1500起步", "建议删游戏重练", "区前10稳了"])
    outfit = random.choice(funny_outfit)
    fortune = random.choice(fortunes)
    
    return render_template('result.html',
                          name=name, area=area,
                          hidden=hidden_score, predict=predict_rank,
                          outfit=outfit, fortune=fortune)

if __name__ == '__main__':
    app.run(host='0.0.0.0', port=5000, debug=True)